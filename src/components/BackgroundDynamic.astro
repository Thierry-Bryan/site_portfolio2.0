<div class="fixed inset-0 -z-10">
  <div id="background-container" class="w-full h-full relative overflow-hidden bg-black pointer-events-auto">
    <!-- Blob 1: Grande ellipse violet-cyan (center) -->
    <div
      class="absolute"
      style="
        left: 25%;
        top: 65%;
        transform: translate(-50%, -50%);
        width: 30vw;
        height: 60vh;
        border-radius: 50%;
        background: #d10f0f;
        mix-blend-mode: screen;
        filter: blur(4vw);
        z-index: 1;
      "
    >
    </div>

    <div
      class="absolute"
      style="
        left: 40%;
        top: 60%;
        transform: translate(-50%, -50%);
        width: 20vw;
        height: 60vh;
        border-radius: 50%;
        background: #2200ff;
        mix-blend-mode: screen;
        filter: blur(5vw);
        z-index: 1;
      "
    >
    </div>

    <!-- Blob SVG organique complexe -->
    <div
      class="absolute"
      style="
        left: 30%;
        top: 70%;
        transform: translate(-50%, -50%);
        width: 50vw;
        height: 112vh;
        z-index: 0;
      "
    >
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 2666 2020"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_complex)">
          <path
            d="M1097.57 546.567C1113.88 678.066 1136.22 858.116 1116.1 863.399C1098 868.151 1042.39 764.829 986.837 661.619C934.971 565.257 883.155 468.992 861.973 460.872C856.573 458.802 850.541 455.867 844.258 452.81L844.251 452.806C799.494 431.027 742.034 403.067 809.948 637.48C843.848 754.489 896.179 888.171 937.942 994.857L937.954 994.886C991.602 1131.93 1048.13 1136.12 1004.11 1150.42C928.153 1071.02 416.048 867.366 389.71 929.805C395.267 1040.84 673.853 1130.29 795.273 1281.07C826.366 1354.9 660.436 1346.89 616.143 1354.9C455.548 1383.94 375.004 1414.81 367.764 1476.47C355.906 1577.46 686.322 1411.21 766.763 1531.97C850.029 1494.87 767.492 1612.11 677.572 1739.85C656.841 1769.29 290.832 1969.94 271.258 1998.74C179.646 2133.53 602.042 1946.81 662.416 1934.29L662.434 1934.29C670.906 1932.53 679.04 1930.84 686.322 1929.65C714.893 1924.98 784.782 1869.63 854.744 1814.22L854.751 1814.22C929.687 1754.87 1004.7 1695.46 1029.12 1698.19C1056.26 1701.23 1026.12 1804.78 1004.11 1880.4L1004.11 1880.42C995.496 1910 988.132 1935.31 985.931 1948.64C1003.6 2084.78 1112.14 1933.01 1194.02 1818.5L1194.05 1818.45C1222.02 1779.33 1246.88 1744.56 1263.94 1727.13C1296.11 1694.25 1317.05 1762.87 1343 1847.87C1371.09 1939.92 1405.04 2051.18 1465.47 2073.54C1530.82 2097.73 1555 1983.26 1578.01 1874.36C1595.92 1789.59 1613.11 1708.19 1648.47 1698.19C1683.86 1688.19 1773.56 1741.83 1877.78 1804.15L1877.79 1804.15C2011.41 1884.05 2168.9 1978.22 2266.37 1970.83C2310.42 1967.49 2009.65 1676.68 1962.48 1615.66C1856.08 1478.01 2424.38 1468.88 2443.55 1411.21C2462.72 1353.55 1978.3 1395.97 1806.23 1354.9C1773.17 1347.01 2221.76 1064.48 2280.25 968.231C2204.59 968.231 1828.15 1163.4 1710.07 1112.88C1660.5 1091.68 2098.76 472.394 1989.82 453.01C1917.1 440.071 1796.93 635.417 1695.4 800.475L1695.39 800.485L1695.39 800.49C1617.35 927.351 1550.32 1036.32 1524.3 1019.06C1497.97 1001.6 1484.9 835.899 1471.19 662.084L1471.19 662.07C1453.72 440.663 1513.74 224.948 1465.47 266.856C1418.07 308.015 1330.05 492.148 1322.83 646.586C1316.92 772.843 1312.53 866.656 1290.19 813.083C1277.53 782.743 1259.09 722.247 1238.34 654.179L1238.34 654.178C1177.64 455.036 1097.19 191.085 1084.08 427.853C1085.72 451.047 1091.18 495.066 1097.56 546.526L1097.57 546.567Z"
            fill="#ffffff"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_complex"
            x="0"
            y="0"
            width="2666"
            height="2400"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="80" result="effect1_foregroundBlur_complex"/>
          </filter>
        </defs>
      </svg>
    </div>

    <!-- Blob SVG organique cyan -->
    <div
      class="absolute"
      style="
        left: 30%;
        top: 60%;
        transform: translate(-50%, -50%);
        width: 120vw;
        height: 110vh;
        z-index: 2;
        filter: blur(3vw);

      "
    >
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 2043 1946"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_organic)">
          <path
            d="M228.18 2113.56C249.569 2034.72 120.843 1329.94 470.68 1206.76C641.932 1101.08 732.123 1135.26 738.68 1040.56C744.416 957.709 870.149 863.009 842.18 793.06C780.18 638.003 655.388 718.306 769.679 401.059C888.412 71.4832 1149.31 264.629 1306.18 442.06C1379.71 525.233 1228.98 841.842 1249.68 896.06C1303.93 1006.85 1616.69 1258.14 1636.18 1288.06C1770.68 1494.56 1659.85 1819.52 1811.68 2061.56C1915.18 2226.56 1040.35 2075.53 976.179 2113.56C912.011 2151.59 206.791 2192.39 228.18 2113.56Z"
            fill="#03a8e4"></path>
        </g>
        <defs>
          <filter
            id="filter0_f_organic"
            x="0"
            y="0"
            width="2043"
            height="2400"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"></feBlend>
            <feGaussianBlur
              stdDeviation="60"
              result="effect1_foregroundBlur_organic"></feGaussianBlur>
          </filter>
        </defs>
      </svg>
    </div>

    <!-- Énergies bleu-violet qui s'envolent -->
    
    <!-- Particule d'énergie 1: Bleu électrique -->
    <div
      class="absolute"
      style="
        left: 30%;
        top: 80%;
        width: 3vw;
        height: 6vh;
        border-radius: 50% 50% 50% 70%;
        background: radial-gradient(circle, #0099ff 0%, #0066cc 50%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.5vw);
        z-index: 4;
        animation: firefly1 3s ease-out infinite;
      "
    >
    </div>

    <!-- Particule d'énergie 2: Violet intense -->
    <div
      class="absolute"
      style="
        left: 45%;
        top: 75%;
        width: 2vw;
        height: 4vh;
        border-radius: 50% 50% 50% 80%;
        background: radial-gradient(circle, #8800ff 0%, #6600cc 70%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.3vw);
        z-index: 4;
        animation: firefly2 2.5s ease-out infinite 0.5s;
      "
    >
    </div>

    <!-- Particule d'énergie 3: Cyan brillant -->
    <div
      class="absolute"
      style="
        left: 35%;
        top: 85%;
        width: 1.5vw;
        height: 3vh;
        border-radius: 50% 50% 70% 50%;
        background: radial-gradient(circle, #00ffff 0%, #0099cc 60%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.2vw);
        z-index: 4;
        animation: firefly3 2s ease-out infinite 1s;
      "
    >
    </div>

    <!-- Particule d'énergie 4: Bleu profond -->
    <div
      class="absolute"
      style="
        left: 40%;
        top: 78%;
        width: 2.5vw;
        height: 5vh;
        border-radius: 60% 50% 50% 70%;
        background: radial-gradient(circle, #0066ff 0%, #003399 80%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.4vw);
        z-index: 4;
        animation: firefly4 1.8s ease-out infinite 1.5s;
      "
    >
    </div>

    <!-- Particule d'énergie 5: Violet-bleu -->
    <div
      class="absolute"
      style="
        left: 50%;
        top: 82%;
        width: 4vw;
        height: 7vh;
        border-radius: 50% 60% 50% 80%;
        background: radial-gradient(circle, #6633ff 0%, #3300cc 40%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.6vw);
        z-index: 4;
        animation: firefly5 3.2s ease-out infinite 0.8s;
      "
    >
    </div>

    <!-- Particule d'énergie 6: Étincelle blanche-bleue -->
    <div
      class="absolute"
      style="
        left: 25%;
        top: 88%;
        width: 1vw;
        height: 2vh;
        border-radius: 50%;
        background: radial-gradient(circle, #ffffff 0%, #66ccff 30%, transparent 100%);
        mix-blend-mode: screen;
        filter: blur(0.1vw);
        z-index: 4;
        animation: spark 1.5s ease-out infinite 2s;
      "
    >
    </div>

    <!-- Blob interactif qui suit la souris -->
    <div
      id="mouse-blob"
      class="absolute pointer-events-none mouse-blob-gradient"
      style="
        width: 15vw;
        height: 15vw;
        border-radius: 50%;
        mix-blend-mode: screen;
        filter: blur(2vw);
        z-index: 5;
        opacity: 0;
        transform: translate(-50%, -50%);
        transition: opacity 0.3s ease;
      "
    >
    </div>

    <!-- Avatar au premier plan -->
    <div
      class="absolute"
      style="
        left: 28%;
        top: 65%;
        transform: translate(-50%, -50%);
        z-index: 20;
        width: 40vw;
        max-width: 500px;
        min-width: 150px;
      "
    >
      <img
        src="/avatar/avatar.png"
        alt="Avatar"
        style="
          width: 100%;
          height: auto;
        "
      />
    </div>

    <!-- Motif halftone 1 : Plus de contraste -->
    <div
      class="absolute inset-0"
      style="background: url('/images/halftone-dots.svg') center/cover no-repeat;
              mix-blend-mode: color-dodge;
              opacity: 1;
              z-index: 10;"
    >
    </div>
    <div
      class="absolute inset-0"
      style="background: url('/images/halftone-dots.svg') center/cover no-repeat;
              mix-blend-mode: color-burn;
              opacity: 1;
              z-index: 10;"
    >
    </div>
  </div>
</div>

<style>
  @keyframes firefly1 {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-80vh) translateX(-30px) scale(0.2);
      opacity: 0;
    }
  }

  @keyframes firefly2 {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-70vh) translateX(25px) scale(0.1);
      opacity: 0;
    }
  }

  @keyframes firefly3 {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-90vh) translateX(-15px) scale(0.3);
      opacity: 0;
    }
  }

  @keyframes firefly4 {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-100vh) translateX(40px) scale(0.1);
      opacity: 0;
    }
  }

  @keyframes firefly5 {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-75vh) translateX(-20px) scale(0.2);
      opacity: 0;
    }
  }

  @keyframes spark {
    0% { 
      transform: translate(-50%, -50%) translateY(0px) translateX(0px) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) translateY(-120vh) translateX(10px) scale(0.05);
      opacity: 0;
    }
  }

  .mouse-blob-gradient {
    background: radial-gradient(circle, #ff00ff 0%, #00ffff 50%, transparent 100%);
  }

  @keyframes smoothColorFlow {
    0% { 
      background: radial-gradient(circle, #ff00ff 0%, #00ffff 50%, transparent 100%);
    }
    14.28% { 
      background: radial-gradient(circle, #cc00ff 10%, #33ffcc 45%, transparent 100%);
    }
    28.57% { 
      background: radial-gradient(circle, #9900ff 20%, #66ff99 40%, transparent 100%);
    }
    42.85% { 
      background: radial-gradient(circle, #6600ff 30%, #99ff66 35%, transparent 100%);
    }
    57.14% { 
      background: radial-gradient(circle, #3300ff 40%, #ccff33 30%, transparent 100%);
    }
    71.42% { 
      background: radial-gradient(circle, #0033ff 50%, #ffff00 25%, transparent 100%);
    }
    85.71% { 
      background: radial-gradient(circle, #0066ff 45%, #ffcc00 30%, transparent 100%);
    }
    100% { 
      background: radial-gradient(circle, #ff00ff 0%, #00ffff 50%, transparent 100%);
    }
  }

  .mouse-blob-gradient.active {
    animation: smoothColorFlow 20s ease-in-out infinite;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mouseBlob = document.getElementById('mouse-blob');
    const backgroundContainer = document.getElementById('background-container');
    
    if (!mouseBlob || !backgroundContainer) {
      console.log('Éléments non trouvés:', { mouseBlob, backgroundContainer });
      return;
    }

    let isMouseInside = false;
    
    function updateMousePosition(e) {
      if (!mouseBlob || !backgroundContainer) return;
      
      const rect = backgroundContainer.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      // Suivi instantané de la souris
      mouseBlob.style.left = x + 'px';
      mouseBlob.style.top = y + 'px';
    }
    
    function handleMouseEnter(e) {
      console.log('Mouse entered - starting ultra-smooth color flow!');
      if (!mouseBlob) return;
      
      isMouseInside = true;
      mouseBlob.style.opacity = '0.7';
      
      // Démarrer l'animation continue et fluide
      mouseBlob.classList.add('active');
      
      updateMousePosition(e);
    }
    
    function handleMouseLeave() {
      if (!mouseBlob) return;
      
      isMouseInside = false;
      mouseBlob.style.opacity = '0';
      
      // Arrêter l'animation fluide
      mouseBlob.classList.remove('active');
    }
    
    function handleMouseMove(e) {
      updateMousePosition(e);
    }
    
    // Événements sur le conteneur de fond
    backgroundContainer.addEventListener('mouseenter', handleMouseEnter);
    backgroundContainer.addEventListener('mouseleave', handleMouseLeave);
    backgroundContainer.addEventListener('mousemove', handleMouseMove);
    
    // Nettoyage
    window.addEventListener('beforeunload', () => {
      if (backgroundContainer) {
        backgroundContainer.removeEventListener('mouseenter', handleMouseEnter);
        backgroundContainer.removeEventListener('mouseleave', handleMouseLeave);
        backgroundContainer.removeEventListener('mousemove', handleMouseMove);
      }
    });
  });
</script>
